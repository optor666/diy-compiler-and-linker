/* param_test.c源文件 */
/*********************************************************** 
 * 功能:	参数传值测试
 **********************************************************/
int add(int x, int y)
{
	int z;
	
	z = x + y;
	return z;
}

/*********************************************************** 
 * 功能:	参数传地址测试
 **********************************************************/
void param_ptr(int *px)
{
	*px = 123;
}

/*********************************************************** 
 * 功能:	函数返回值作用实参测试
 **********************************************************/
int func_as_param_test()
{
	int sum, a = 1, b = 2, c;	
	
  sum = add(c = add(a,b),add(1,2));
	printf("sum = %d\n",sum);
}

/*********************************************************** 
 * 功能:	可变参数测试
 **********************************************************/
void __cdecl sum(int num,...)
{
	int sum = 0, i = 0;
	int *p1;
	int *end;
	
	p1 = &num;  
	end = p1 + num;
	for(p1 = p1 + 1; p1 <= end; p1 = p1 + 1)
	{
		sum = sum + *p1;
	}	
	printf("sum = %d\n",sum);
}

/*********************************************************** 
 * 功能:	main函数
 **********************************************************/
int  main()
{
	int n = 0;
		
	printf("add(3,5) = %d\n",add(3,5));
	param_ptr(&n);
	printf("n = %d\n",n);
	sum(5,1,2,3,4,5);
	
	return 0;
}

/*********************************************************** 
 * 功能:	入口函数
 **********************************************************/
void  _entry()
{
	int ret;
	ret = main();
	exit(ret);
}